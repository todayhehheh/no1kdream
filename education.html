<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê¸°ì´ˆì†Œì–‘êµìœ¡ - ê¿ˆë“œë¦¼</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        /* Education Page Specific Styles */
        .header { text-align: center; margin-bottom: 30px; margin-top: 10px; }
        .header h1 { color: #2d3436; margin: 0; font-size: 28px; font-weight: 800; }
        .header p { color: #636e72; margin: 5px 0 0; }

        .container-wide {
            max-width: 1000px; margin: 0 auto; padding: 20px;
        }

        /* Video Grid */
        .video-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .video-card {
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 4px 10px rgba(0,0,0,0.05);
            transition: transform 0.2s;
            cursor: pointer;
            border: 1px solid #eee;
        }
        .video-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }

        .thumbnail {
            width: 100%; aspect-ratio: 16/9;
            background-size: cover; background-position: center;
            position: relative;
        }
        .play-icon {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-size: 40px; color: rgba(255,255,255,0.9); text-shadow: 0 2px 5px rgba(0,0,0,0.5);
        }

        .card-body { padding: 15px; }
        
        /* [ìˆ˜ì •] ê³¼ëª©ëª… ë°°ì§€ëŠ” ì‚­ì œí•¨ (ì‚¬ìš©ìì—ê²Œ ì•ˆ ë³´ì´ê²Œ) */
        
        .video-title { font-size: 15px; font-weight: bold; color: #333; margin: 0; line-height: 1.4; word-break: keep-all; }

        /* Pagination */
        .pagination { display: flex; justify-content: center; gap: 10px; margin-top: 20px; }
        .page-btn {
            background: white; border: 1px solid #ddd; padding: 8px 15px;
            border-radius: 8px; cursor: pointer; font-weight: bold; color: #555;
        }
        .page-btn:hover { background: #f8f9fa; }
        .page-btn:disabled { opacity: 0.5; cursor: not-allowed; }

        /* Modal Inner Styles */
        .modal-video-wrap {
            position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; 
            border-radius: 12px; margin-bottom: 20px; background: #000;
        }
        .modal-video-wrap iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        
        .quiz-section { background: #f8f9fa; padding: 15px; border-radius: 12px; margin-bottom: 20px; text-align: left; }
        .quiz-q { font-weight: bold; margin-bottom: 10px; color: #2d3436; font-size: 15px; }
        .quiz-options label { display: block; margin-bottom: 8px; cursor: pointer; font-size: 14px; }
        
        .auth-section { border-top: 1px solid #eee; padding-top: 20px; }
        .auth-section input { width: 100%; padding: 12px; margin-bottom: 10px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; }
        
        .back-home { position: absolute; top: 20px; left: 20px; text-decoration: none; font-weight: bold; color: #666; background: white; padding: 8px 15px; border-radius: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
    </style>
</head>
<body>

    <a href="index.html" class="back-home">â† í™ˆìœ¼ë¡œ</a>

    <div class="glass-container container-wide">
        <div class="header">
            <h1>ğŸ“š ê¸°ì´ˆì†Œì–‘êµìœ¡</h1>
            <p>ì˜ìƒì„ ì‹œì²­í•˜ê³  í€´ì¦ˆë¥¼ ë§íˆë©´ ìˆ˜ë£Œê°€ ì¸ì •ë©ë‹ˆë‹¤.</p>
        </div>

        <div class="video-grid" id="videoGrid">
            </div>

        <div class="pagination">
            <button class="page-btn" id="prevBtn" onclick="changePage(-1)">ì´ì „</button>
            <span id="pageInfo" style="display:flex; align-items:center; font-weight:bold; color:#555;">1 / 1</span>
            <button class="page-btn" id="nextBtn" onclick="changePage(1)">ë‹¤ìŒ</button>
        </div>
    </div>

    <div id="loadingOverlay" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(255,255,255,0.8); z-index:9999; justify-content:center; align-items:center;">
        <div class="spinner" style="border: 4px solid #f3f3f3; border-top: 4px solid #6C5CE7; border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite;"></div>
        <style>@keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }</style>
    </div>

    <script type="module">
        import { db, collection, addDoc, query, where, getDocs, Timestamp } from "./js/firebase-config.js";

        // ==========================================
        // 1. ê°•ì˜ ë°ì´í„° (1ë²ˆ ~ 10ë²ˆ)
        // ==========================================
        const videoData = [
{ 
                id: 1, 
                cat: "ê·¼ë¡œê¶Œìµêµìœ¡", 
                title: "ì•Œë°”ìƒì´ ê¼­ ì•Œì•„ì•¼ í•  ë…¸ë™ë²•", 
                url: "https://www.youtube.com/embed/1o4bLdtNngI", 
                question: "ì•„ë¥´ë°”ì´íŠ¸ë¥¼ ì‹œì‘í•˜ê¸° ì „, ì‚¬ì¥ë‹˜ê³¼ ë°˜ë“œì‹œ ì‘ì„±í•´ì•¼ í•˜ëŠ” ë¬¸ì„œëŠ”?", 
                options: ["â‘  ìê¸°ì†Œê°œì„œ", "â‘¡ ê·¼ë¡œê³„ì•½ì„œ", "â‘¢ ë°˜ì„±ë¬¸", "â‘£ ë³´ì•ˆê°ì„œ"], 
                answer: 1 
            },
            { 
                id: 2, 
                cat: "ì•„ë™í•™ëŒ€ ì˜ˆë°©âˆ™ì¸ê¶Œêµìœ¡", 
                title: "ìš°ë¦¬ì˜ ê´€ì‹¬ì´ í•„ìš”í•©ë‹ˆë‹¤", 
                url: "https://www.youtube.com/embed/Iu5pr1mCDw8", 
                question: "ì•„ë™í•™ëŒ€ê°€ ì˜ì‹¬ë˜ëŠ” ìƒí™©ì„ ëª©ê²©í–ˆì„ ë•Œ ì˜¬ë°”ë¥¸ í–‰ë™ì€?", 
                options: ["â‘  ë‚¨ì˜ ê°€ì •ì‚¬ì´ë‹ˆ ì‹ ê²½ ëˆë‹¤", "â‘¡ 112 ë˜ëŠ” ì•„ë™ë³´í˜¸ì „ë¬¸ê¸°ê´€ì— ì‹ ê³ í•œë‹¤", "â‘¢ í™•ì‹¤í•˜ì§€ ì•Šìœ¼ë‹ˆ ê·¸ëƒ¥ ë„˜ì–´ê°„ë‹¤", "â‘£ ë¶€ëª¨ë‹˜ì—ê²Œ ì§ì ‘ ë”°ì§„ë‹¤"], 
                answer: 1 
            },
            { 
                id: 3, 
                cat: "ì„±í­ë ¥ì˜ˆë°©êµìœ¡", 
                title: "ë™ì˜ì™€ ì¡´ì¤‘", 
                url: "https://www.youtube.com/embed/cahTXbGx98A", 
                question: "ìƒëŒ€ë°©ê³¼ì˜ ìŠ¤í‚¨ì‹­ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ì›ì¹™ì€?", 
                options: ["â‘  ìƒëŒ€ë°©ì˜ ëª…í™•í•œ ë™ì˜", "â‘¡ ë‚˜ì˜ ê¸°ë¶„", "â‘¢ ë¶„ìœ„ê¸°", "â‘£ ì¹œêµ¬ë“¤ì˜ ì¡°ì–¸"], 
                answer: 0 
            },
            { 
                id: 4, 
                cat: "ë””ì§€í„¸ ì„±ë²”ì£„ ì˜ˆë°©êµìœ¡", 
                title: "ë¶ˆë²• ì´¬ì˜ë¬¼ ëŒ€ì²˜ë²•", 
                url: "https://www.youtube.com/embed/VrladAEapok", 
                question: "ë¶ˆë²• ì´¬ì˜ë¬¼ì„ ë°œê²¬í•˜ê±°ë‚˜ ì „ì†¡ë°›ì•˜ì„ ë•Œ ì˜¬ë°”ë¥¸ ëŒ€ì²˜ëŠ”?", 
                options: ["â‘  ì¹œêµ¬ë“¤ì—ê²Œ ê³µìœ í•œë‹¤", "â‘¡ í˜¸ê¸°ì‹¬ì— ì €ì¥í•´ ë‘”ë‹¤", "â‘¢ ì¦‰ì‹œ ì‚­ì œí•˜ê³  ìœ í¬í•˜ì§€ ì•Šìœ¼ë©° ì‹ ê³ í•œë‹¤", "â‘£ ë‚˜ë§Œ ì¡°ìš©íˆ ë³¸ë‹¤"], 
                answer: 2 
            },
            { 
                id: 5, 
                cat: "ì„±êµìœ¡", 
                title: "ì˜¬ë°”ë¥¸ ì„±ì§€ì‹", 
                url: "https://www.youtube.com/embed/43CRq23H5RE", 
                question: "í”¼ì„ì— ëŒ€í•œ ì„¤ëª…ìœ¼ë¡œ ì˜¬ë°”ë¥¸ ê²ƒì€?", 
                options: ["â‘  í”¼ì„ì€ ì—¬ì„±ë§Œ í•˜ëŠ” ê²ƒì´ë‹¤", "â‘¡ ìƒë¦¬ ê¸°ê°„ì—ëŠ” ì„ì‹ ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤", "â‘¢ ì˜¬ë°”ë¥¸ í”¼ì„ë²•ì„ ì‚¬ìš©í•˜ì—¬ ì›ì¹˜ ì•ŠëŠ” ì„ì‹ ì„ ì˜ˆë°©í•´ì•¼ í•œë‹¤", "â‘£ í•œ ë²ˆì˜ ì‹¤ìˆ˜ë¡œëŠ” ì„ì‹ ë˜ì§€ ì•ŠëŠ”ë‹¤"], 
                answer: 2 
            },
            { 
                id: 6, 
                cat: "ìì‚´ì˜ˆë°©êµìœ¡", 
                title: "ì†Œì¤‘í•œ ìƒëª… ì§€í‚¤ê¸°", 
                url: "https://www.youtube.com/embed/jvDE1XFlAIo", 
                question: "ì¹œêµ¬ê°€ 'ì£½ê³  ì‹¶ë‹¤'ê³  ë§í–ˆì„ ë•Œ ê°€ì¥ ë°”ëŒì§í•œ ë°˜ì‘ì€?", 
                options: ["â‘  ë†ë‹´ìœ¼ë¡œ ë°›ì•„ë„˜ê¸´ë‹¤", "â‘¡ ë¹„ë°€ë¡œ í•´ì¤„ í…Œë‹ˆ ê±±ì • ë§ë¼ê³  í•œë‹¤", "â‘¢ ì „ë¬¸ê°€ë‚˜ ì„ ìƒë‹˜ê»˜ ì•Œë¦¬ê³  ë„ì›€ì„ ìš”ì²­í•œë‹¤", "â‘£ ë‚˜ì•½í•œ ì†Œë¦¬ í•˜ì§€ ë§ë¼ê³  ì¶©ê³ í•œë‹¤"], 
                answer: 2 
            },
            { 
                id: 7, 
                cat: "ë§ˆì•½âˆ™ë„ë°• ì˜ˆë°©êµìœ¡", 
                title: "ì¤‘ë…ì˜ ìœ„í—˜ì„±", 
                url: "https://www.youtube.com/embed/HTeVGChq19w", 
                question: "ì¹œêµ¬ê°€ 'ëˆì„ ì‰½ê²Œ ë²Œ ìˆ˜ ìˆëŠ” ê²Œì„(ë„ë°•)'ì„ ê¶Œìœ í•  ë•Œ ì˜¬ë°”ë¥¸ í–‰ë™ì€?", 
                options: ["â‘  ì†Œì•¡ì´ë‹ˆ ì¬ë¯¸ ì‚¼ì•„ í•œ ë²ˆë§Œ í•´ë³¸ë‹¤", "â‘¡ ì¹œêµ¬ì™€ì˜ ì˜ë¦¬ë¥¼ ìœ„í•´ ëˆì„ ë¹Œë ¤ì¤€ë‹¤", "â‘¢ ë¶ˆë²• ë„ë°•ì¼ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë‹¨í˜¸í•˜ê²Œ ê±°ì ˆí•œë‹¤", "â‘£ ëˆì„ ë²Œ ê¸°íšŒë¼ê³  ìƒê°í•˜ê³  ì°¸ì—¬í•œë‹¤"], 
                answer: 2 
            },
            { 
                id: 8, 
                cat: "ê¸ˆìœµêµìœ¡", 
                title: "ì‹ ìš©ê³¼ ìì‚°ê´€ë¦¬", 
                url: "https://www.youtube.com/embed/SvfP1LlVfys", 
                question: "ì‹ ìš© ë“±ê¸‰ì„ ê´€ë¦¬í•˜ê¸° ìœ„í•´ í”¼í•´ì•¼ í•  í–‰ë™ì€?", 
                options: ["â‘  ìš©ëˆ ê¸°ì…ì¥ì„ ì“´ë‹¤", "â‘¡ ì²´í¬ì¹´ë“œë¥¼ ì£¼ë¡œ ì‚¬ìš©í•œë‹¤", "â‘¢ ë¹Œë¦° ëˆì´ë‚˜ í†µì‹ ìš”ê¸ˆì„ ì—°ì²´í•œë‹¤", "â‘£ ê³„íšì ì¸ ì†Œë¹„ë¥¼ í•œë‹¤"], 
                answer: 2 
            },
            { 
                id: 9, 
                cat: "ì„ ê±°ê¶Œ êµìœ¡", 
                title: "ë‚˜ì˜ í•œ í‘œì˜ ê°€ì¹˜", 
                url: "https://www.youtube.com/embed/-v6lWwcBKgA", 
                question: "ë¯¼ì£¼ì£¼ì˜ ì‚¬íšŒì—ì„œ êµ­ë¯¼ì´ ì •ì¹˜ì— ì°¸ì—¬í•˜ëŠ” ê°€ì¥ ê¸°ë³¸ì ì¸ ë°©ë²•ì€?", 
                options: ["â‘  ì„¸ê¸ˆ ë‚©ë¶€ ê±°ë¶€", "â‘¡ íˆ¬í‘œ(ì„ ê±°) ì°¸ì—¬", "â‘¢ ë‰´ìŠ¤ ë³´ì§€ ì•Šê¸°", "â‘£ íƒ€ì¸ì˜ ì˜ê²¬ ë¬´ì‹œí•˜ê¸°"], 
                answer: 1 
            },
            { 
                id: 10, 
                cat: "ì§€ì ì¬ì‚°ê¶Œ êµìœ¡", 
                title: "ì €ì‘ê¶Œ ë°”ë¡œ ì•Œê¸°", 
                url: "https://www.youtube.com/embed/bRxLHA1A9lk", 
                question: "ì¸í„°ë„·ì— ìˆëŠ” ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•  ë•Œ ì˜¬ë°”ë¥¸ ë°©ë²•ì€?", 
                options: ["â‘  ì¶œì²˜ë¥¼ ë°íˆì§€ ì•Šê³  ë‚´ ê²ƒì²˜ëŸ¼ ì“´ë‹¤", "â‘¡ ì €ì‘ê¶Œìì˜ í—ˆë½ì„ ë°›ê±°ë‚˜ ì €ì‘ê¶Œ í”„ë¦¬ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•œë‹¤", "â‘¢ ì•½ê°„ë§Œ ë³€í˜•í•´ì„œ ì‚¬ìš©í•œë‹¤", "â‘£ ìƒì—…ì ìœ¼ë¡œë§Œ ì•ˆ ì“°ë©´ ë§ˆìŒëŒ€ë¡œ ì¨ë„ ëœë‹¤"], 
                answer: 1 
            },

            // [11~24ë²ˆ ì¶”ê°€]
            { 
                id: 11, 
                cat: "ê·¼ë¡œê¶Œìµêµìœ¡", 
                title: "ë…¸ë™ì¸ê¶Œ ê¸°ì´ˆ 1 - ì£¼íœ´ìˆ˜ë‹¹", 
                url: "https://www.youtube.com/embed/8cLYzaEWnNM", 
                question: "ì¼ì£¼ì¼ì— 15ì‹œê°„ ì´ìƒ ì¼í•˜ê³  ê°œê·¼í–ˆì„ ë•Œ ë°›ì„ ìˆ˜ ìˆëŠ” ìˆ˜ë‹¹ì€?", 
                options: ["â‘  ì•¼ê°„ìˆ˜ë‹¹", "â‘¡ ì£¼íœ´ìˆ˜ë‹¹", "â‘¢ ì—°ì¥ìˆ˜ë‹¹", "â‘£ ì§ì±…ìˆ˜ë‹¹"], 
                answer: 1 
            },
            { 
                id: 12, 
                cat: "ê·¼ë¡œê¶Œìµêµìœ¡", 
                title: "ë…¸ë™ì¸ê¶Œ ê¸°ì´ˆ 2 - ìµœì €ì„ê¸ˆ", 
                url: "https://www.youtube.com/embed/zBfJkQ5PTSo", 
                question: "ê·¼ë¡œìì—ê²Œ ì¤˜ì•¼ í•˜ëŠ” ì„ê¸ˆì˜ ìµœì € ìˆ˜ì¤€ì„ ë²•ìœ¼ë¡œ ì •í•œ ì œë„ëŠ”?", 
                options: ["â‘  ìµœê³ ì„ê¸ˆì œ", "â‘¡ í‰ê· ì„ê¸ˆì œ", "â‘¢ ìµœì €ì„ê¸ˆì œ", "â‘£ ì„±ê³¼ê¸‰ì œ"], 
                answer: 2 
            },
            { 
                id: 13, 
                cat: "ê·¼ë¡œê¶Œìµêµìœ¡", 
                title: "ë…¸ë™ì¸ê¶Œ ê¸°ì´ˆ 3 - ë¶€ë‹¹ëŒ€ìš° ëŒ€ì²˜", 
                url: "https://www.youtube.com/embed/TvRUfFX2Ln8", 
                question: "ì¼í•˜ë‹¤ê°€ ë‹¤ì³¤ì„ ë•Œ ì¹˜ë£Œë¹„ì™€ ë³´ìƒì„ ë°›ì„ ìˆ˜ ìˆëŠ” ì œë„ëŠ”?", 
                options: ["â‘  ì‚°ì¬ë³´í—˜(ì‚°ì—…ì¬í•´ ë³´ìƒ)", "â‘¡ êµ­ë¯¼ì—°ê¸ˆ", "â‘¢ ê³ ìš©ë³´í—˜", "â‘£ ì‹¤ë¹„ë³´í—˜"], 
                answer: 0 
            },
            { 
                id: 14, 
                cat: "ê·¼ë¡œê¶Œìµêµìœ¡", 
                title: "ë…¸ë™ì¸ê¶Œ ê¸°ì´ˆ 4 - ê·¼ë¡œê³„ì•½ í•´ì§€", 
                url: "https://www.youtube.com/embed/jLIGuYwzMJo", 
                question: "ì•„ë¥´ë°”ì´íŠ¸ë¥¼ ê·¸ë§Œë‘ê³  ì‹¶ì„ ë•Œ ë°”ëŒì§í•œ íƒœë„ëŠ”?", 
                options: ["â‘  ì•„ë¬´ ë§ ì—†ì´ ì¶œê·¼í•˜ì§€ ì•ŠëŠ”ë‹¤(ì ìˆ˜)", "â‘¡ ë¬¸ìë¡œ í†µë³´í•˜ê³  ë°”ë¡œ ì°¨ë‹¨í•œë‹¤", "â‘¢ ìµœì†Œ 2ì£¼~1ë‹¬ ì „ì— ì‚¬ì¥ë‹˜ê»˜ ë¯¸ë¦¬ ë§í•œë‹¤", "â‘£ ì¹œêµ¬ë¥¼ ëŒ€ì‹  ë³´ë‚´ê³  ê·¸ë§Œë‘”ë‹¤"], 
                answer: 2 
            },
            { 
                id: 15, 
                cat: "ì•„ë™í•™ëŒ€ ì˜ˆë°©âˆ™ì¸ê¶Œêµìœ¡", 
                title: "ê¶Œë¦¬ì™€ ì±…ì„", 
                url: "https://www.youtube.com/embed/FggvJionlFU", 
                question: "ëª¨ë“  ì‚¬ëŒì´ íƒœì–´ë‚  ë•Œë¶€í„° ê°€ì§€ëŠ”, ì¹¨í•´ë°›ì§€ ì•Šì„ ê¶Œë¦¬ëŠ”?", 
                options: ["â‘  ì†Œìœ ê¶Œ", "â‘¡ ì¸ê¶Œ", "â‘¢ ì°¸ì •ê¶Œ", "â‘£ ê²½ì˜ê¶Œ"], 
                answer: 1 
            },
            { 
                id: 16, 
                cat: "ì„±í­ë ¥ì˜ˆë°©êµìœ¡", 
                title: "ë””ì§€í„¸ ì„±í­ë ¥ì˜ ì´í•´", 
                url: "https://www.youtube.com/embed/RCgTg8JInbI", 
                question: "ì˜¨ë¼ì¸ì—ì„œ ë‚¯ì„  ì‚¬ëŒì´ ê°œì¸ì •ë³´ë‚˜ ì‚¬ì§„ì„ ìš”êµ¬í•  ë•Œ ëŒ€ì²˜ë²•ì€?", 
                options: ["â‘  ì¹œì ˆí•˜ê²Œ ëª¨ë‘ ì•Œë ¤ì¤€ë‹¤", "â‘¡ ì›í•˜ëŠ” ì‚¬ì§„ì„ ì°ì–´ì„œ ë³´ë‚´ì¤€ë‹¤", "â‘¢ ìš”êµ¬ë¥¼ ê±°ì ˆí•˜ê³  ì°¨ë‹¨í•˜ê±°ë‚˜ ì‹ ê³ í•œë‹¤", "â‘£ ì¹œêµ¬ë“¤ì—ê²Œ ìë‘í•œë‹¤"], 
                answer: 2 
            },
            { 
                id: 17, 
                cat: "ë””ì§€í„¸ ì„±ë²”ì£„ ì˜ˆë°©êµìœ¡", 
                title: "ì‚¬ì´ë²„ ê´´ë¡­í˜ ì˜ˆë°©", 
                url: "https://www.youtube.com/embed/hpd7k8GHrlo", 
                question: "ë‹¨ì²´ ì±„íŒ…ë°©ì—ì„œ íŠ¹ì • ì¹œêµ¬ë¥¼ ë¹„í•˜í•˜ê±°ë‚˜ ë”°ëŒë¦¬ëŠ” í–‰ë™ì€?", 
                options: ["â‘  ë‹¨ìˆœí•œ ì¥ë‚œ", "â‘¡ ì‚¬ì´ë²„ í­ë ¥(ë²”ì£„)", "â‘¢ ì¹œëª© ë„ëª¨", "â‘£ ìŠ¤íŠ¸ë ˆìŠ¤ í•´ì†Œ"], 
                answer: 1 
            },
            { 
                id: 18, 
                cat: "ìì‚´ì˜ˆë°©êµìœ¡", 
                title: "ìƒëª…ì‚¬ë‘ ì§€í‚´ì´ 1", 
                url: "https://www.youtube.com/embed/enN4JV3nIWg", 
                question: "ìš°ìš¸ê°ì´ë‚˜ ì‹¬ë¦¬ì  ì–´ë ¤ì›€ì„ ê²ªì„ ë•Œ ë„ì›€ì„ ë°›ì„ ìˆ˜ ìˆëŠ” ì „í™”ë²ˆí˜¸ëŠ”?", 
                options: ["â‘  114", "â‘¡ 1393 (ìì‚´ì˜ˆë°©ìƒë‹´ì „í™”)", "â‘¢ 119", "â‘£ 112"], 
                answer: 1 
            },
            { 
                id: 19, 
                cat: "ìì‚´ì˜ˆë°©êµìœ¡", 
                title: "ìƒëª…ì‚¬ë‘ ì§€í‚´ì´ 2", 
                url: "https://www.youtube.com/embed/Vd_XfWaFieM", 
                question: "í˜ë“¤ì–´í•˜ëŠ” ì¹œêµ¬ì—ê²Œ ê±´ë„¤ê¸° ì ì ˆí•˜ì§€ ì•Šì€ ë§ì€?", 
                options: ["â‘  'ë§ì´ í˜ë“¤ì—ˆê² ë‹¤, ì´ì•¼ê¸° ë“¤ì–´ì¤„ê²Œ.'", "â‘¡ 'ë„¤ê°€ ì°¸ì•„, ì‹œê°„ì´ ì§€ë‚˜ë©´ ê´œì°®ì•„ì ¸.'", "â‘¢ 'ì–´ë–¤ ì ì´ ê°€ì¥ í˜ë“œë‹ˆ?'", "â‘£ 'ì „ë¬¸ê°€ì—ê²Œ ë„ì›€ì„ ë°›ì•„ë³´ëŠ” ê±´ ì–´ë–¨ê¹Œ?'"], 
                answer: 1 
            },
            { 
                id: 20, 
                cat: "ë§ˆì•½âˆ™ë„ë°• ì˜ˆë°©êµìœ¡", 
                title: "ì•½ë¬¼ ì˜¤ë‚¨ìš© ì˜ˆë°©", 
                url: "https://www.youtube.com/embed/hSy1pk19lnE", 
                question: "ì˜ì‚¬ ì²˜ë°© ì—†ì´ êµ¬í•  ìˆ˜ ì—†ëŠ” ì•½ë¬¼ì„ SNS ë“±ì„ í†µí•´ êµ¬ë§¤í•˜ëŠ” í–‰ë™ì€?", 
                options: ["â‘  í˜„ëª…í•œ ì†Œë¹„", "â‘¡ ë¶ˆë²• ì•½ë¬¼ êµ¬ë§¤(ë²”ì£„)", "â‘¢ ì˜ë£Œ ì‡¼í•‘", "â‘£ ì§êµ¬(ì§ì ‘êµ¬ë§¤)"], 
                answer: 1 
            },
            { 
                id: 21, 
                cat: "ê¸ˆìœµêµìœ¡", 
                title: "ë³´ì´ìŠ¤í”¼ì‹± ì˜ˆë°©", 
                url: "https://www.youtube.com/embed/IBJmlnmGR_E", 
                question: "ê²€ì°°ì´ë‚˜ ê¸ˆìœµê¸°ê´€ì„ ì‚¬ì¹­í•˜ë©° ëˆì„ ì´ì²´í•˜ë¼ëŠ” ì „í™”ë¥¼ ë°›ì•˜ë‹¤ë©´?", 
                options: ["â‘  ì¦‰ì‹œ ì‹œí‚¤ëŠ” ëŒ€ë¡œ ì´ì²´í•œë‹¤", "â‘¡ ì¼ë‹¨ ëŠê³  í•´ë‹¹ ê¸°ê´€ì˜ ê³µì‹ ë²ˆí˜¸ë¡œ í™•ì¸í•œë‹¤", "â‘¢ ë‚´ ê³„ì¢Œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì•Œë ¤ì¤€ë‹¤", "â‘£ ë¬´ì„œìš°ë‹ˆ ì¹œêµ¬ì—ê²Œ ëŒ€ì‹  ë°›ê²Œ í•œë‹¤"], 
                answer: 1 
            },
            { 
                id: 22, 
                cat: "ì„ ê±°ê¶Œ êµìœ¡", 
                title: "ê³µì •í•œ ì„ ê±° 1", 
                url: "https://www.youtube.com/embed/JiraPXPCja0", 
                question: "ì„ ê±° ìš´ë™ ê¸°ê°„ì— í›„ë³´ìì— ëŒ€í•œ í—ˆìœ„ ì‚¬ì‹¤ì„ ìœ í¬í•˜ëŠ” ê²ƒì€?", 
                options: ["â‘  í‘œí˜„ì˜ ììœ ", "â‘¡ ì„ ê±°ë²• ìœ„ë°˜(ë²”ì£„)", "â‘¢ ì •ë‹¹í•œ ë¹„íŒ", "â‘£ ì•Œ ê¶Œë¦¬ ì¶©ì¡±"], 
                answer: 1 
            },
            { 
                id: 23, 
                cat: "ì„ ê±°ê¶Œ êµìœ¡", 
                title: "ê³µì •í•œ ì„ ê±° 2", 
                url: "https://www.youtube.com/embed/pmjazh33m_s", 
                question: "íˆ¬í‘œì†Œ ì•ˆì—ì„œ í•˜ì§€ ë§ì•„ì•¼ í•  í–‰ë™ì€?", 
                options: ["â‘  ì‹ ë¶„ì¦ ì œì‹œ", "â‘¡ ê¸°í‘œì†Œ ì•ˆì—ì„œ íˆ¬í‘œìš©ì§€ ì´¬ì˜", "â‘¢ ì¡°ìš©íˆ ì§ˆì„œ ì§€í‚¤ê¸°", "â‘£ ì„ ê±° ì‚¬ë¬´ì›ì˜ ì•ˆë‚´ ë”°ë¥´ê¸°"], 
                answer: 1 
            },
            { 
                id: 24, 
                cat: "ì§€ì ì¬ì‚°ê¶Œ êµìœ¡", 
                title: "í‘œì ˆ ì˜ˆë°©", 
                url: "https://www.youtube.com/embed/bCkU22-Vyu0", 
                question: "ê³¼ì œë¥¼ í•  ë•Œ ì¸í„°ë„· ìë£Œë¥¼ ê·¸ëŒ€ë¡œ ë² ê»´ì„œ ì œì¶œí•˜ëŠ” í–‰ìœ„ëŠ”?", 
                options: ["â‘  ì°¸ê³ ", "â‘¡ ì¸ìš©", "â‘¢ í‘œì ˆ", "â‘£ ì°½ì‘"], 
                answer: 2 
            }
        ];

        // ==========================================
        // 2. í˜ì´ì§€ë„¤ì´ì…˜ ë¡œì§
        // ==========================================
        let currentPage = 1;
        const itemsPerPage = 8;

        window.changePage = (direction) => {
            const totalPages = Math.ceil(videoData.length / itemsPerPage);
            const newPage = currentPage + direction;
            if (newPage >= 1 && newPage <= totalPages) {
                currentPage = newPage;
                renderVideos();
            }
        };

        const renderVideos = () => {
            const grid = document.getElementById('videoGrid');
            grid.innerHTML = "";
            
            const start = (currentPage - 1) * itemsPerPage;
            const end = start + itemsPerPage;
            const pageData = videoData.slice(start, end);

            pageData.forEach((vid, index) => {
                // ìœ íŠœë¸Œ ID ì¶”ì¶œí•˜ì—¬ ì¸ë„¤ì¼ ìƒì„±
                let thumbUrl = "https://via.placeholder.com/320x180?text=No+Thumbnail";
                const ytMatch = vid.url.match(/embed\/([^?]+)/);
                if(ytMatch) thumbUrl = `https://img.youtube.com/vi/${ytMatch[1]}/mqdefault.jpg`;

                // [ìˆ˜ì •] ì¹´ë“œì— ê³¼ëª©ëª…(cat)ì€ í‘œì‹œí•˜ì§€ ì•ŠìŒ
                grid.innerHTML += `
                    <div class="video-card" onclick="openVideoModal(${start + index})">
                        <div class="thumbnail" style="background-image: url('${thumbUrl}')">
                            <div class="play-icon">â–¶</div>
                        </div>
                        <div class="card-body">
                            <h3 class="video-title">${vid.title}</h3>
                        </div>
                    </div>
                `;
            });

            const totalPages = Math.ceil(videoData.length / itemsPerPage);
            document.getElementById('pageInfo').innerText = `${currentPage} / ${totalPages}`;
            document.getElementById('prevBtn').disabled = currentPage === 1;
            document.getElementById('nextBtn').disabled = currentPage === totalPages;
        };

        renderVideos();

        // ==========================================
        // 3. ëª¨ë‹¬ ë° ì¸ì¦ ë¡œì§
        // ==========================================
        window.openVideoModal = (index) => {
            const vid = videoData[index];

            let optionsHtml = vid.options.map((opt, i) => 
                `<label><input type="radio" name="quizAnswer" value="${i}"> ${opt}</label>`
            ).join('');

            Swal.fire({
                title: vid.title,
                html: `
                    <div class="modal-video-wrap">
                        <iframe src="${vid.url}" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe>
                    </div>
                    
                    <div class="quiz-section">
                        <div class="quiz-q">Q. ${vid.question}</div>
                        <div class="quiz-options">${optionsHtml}</div>
                    </div>

                    <div class="auth-section">
                        <div style="font-size:12px; color:#666; margin-bottom:5px; text-align:left;">ìˆ˜ë£Œ í™•ì¸ì„ ìœ„í•´ ë¡œê·¸ì¸í•˜ì„¸ìš”</div>
                        <input id="eduId" placeholder="ì•„ì´ë”” (ì´ë¦„+ìƒë…„ì›”ì¼)">
                        <input id="eduPw" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸">
                    </div>
                `,
                width: 600,
                showConfirmButton: true,
                confirmButtonText: 'ì œì¶œ ë° ìˆ˜ë£Œ í™•ì¸',
                confirmButtonColor: '#6C5CE7',
                showCloseButton: true,
                preConfirm: async () => {
                    const id = document.getElementById('eduId').value;
                    const pw = document.getElementById('eduPw').value;
                    const selected = document.querySelector('input[name="quizAnswer"]:checked');

                    if (!selected) return Swal.showValidationMessage("í€´ì¦ˆ ì •ë‹µì„ ì„ íƒí•´ì£¼ì„¸ìš”!");
                    if (parseInt(selected.value) !== vid.answer) return Swal.showValidationMessage("ì˜¤ë‹µì…ë‹ˆë‹¤. ì˜ìƒì„ ë‹¤ì‹œ ë³´ê³  ë§ì¶°ë³´ì„¸ìš”!");
                    if (!id || !pw) return Swal.showValidationMessage("ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.");

                    return { id, pw, vid };
                }
            }).then((result) => {
                if (result.isConfirmed) {
                    processSubmission(result.value);
                }
            });
        };

        const processSubmission = async (data) => {
            const rawId = data.id.replace(/\s/g, '');
            const idMatch = rawId.match(/^([ê°€-í£a-zA-Z]+)(\d{6})$/);
            
            if(!idMatch) return Swal.fire('ì˜¤ë¥˜', 'ì•„ì´ë”” í˜•ì‹ì´ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.', 'error');
            const name = idMatch[1];
            const birth = idMatch[2];

            document.getElementById('loadingOverlay').style.display = 'flex';

            try {
                // 1. ìœ ì € ì¸ì¦
                const q = query(collection(db, "users"), where("name", "==", name), where("birth", "==", birth), where("password", "==", data.pw));
                const snapshot = await getDocs(q);

                if(snapshot.empty) {
                    document.getElementById('loadingOverlay').style.display = 'none';
                    return Swal.fire('ì¸ì¦ ì‹¤íŒ¨', 'íšŒì› ì •ë³´ê°€ í‹€ë¦½ë‹ˆë‹¤.', 'error');
                }

                const userDoc = snapshot.docs[0];
                const userId = userDoc.id;
                const userData = userDoc.data();

                // [ìˆ˜ì •] ì¤‘ë³µ ìˆ˜ê°• ì²´í¬ (í•´ë‹¹ í•™ìƒì´, í•´ë‹¹ ì˜ìƒì„ ì´ë¯¸ ìˆ˜ê°•í–ˆëŠ”ì§€)
                const checkQ = query(
                    collection(db, "education_records"), 
                    where("student_id", "==", userId),
                    where("video_title", "==", data.vid.title)
                );
                const checkSnap = await getDocs(checkQ);

                if(!checkSnap.empty) {
                    document.getElementById('loadingOverlay').style.display = 'none';
                    return Swal.fire('ì´ë¯¸ ìˆ˜ë£Œí•¨', 'ì´ë¯¸ ìˆ˜ë£Œí•œ ê°•ì˜ì…ë‹ˆë‹¤.', 'warning');
                }

                // 2. ìˆ˜ê°• ê¸°ë¡ ì €ì¥
                const today = new Date();
                const todayStr = `${today.getFullYear()}-${String(today.getMonth()+1).padStart(2,'0')}-${String(today.getDate()).padStart(2,'0')}`;

                await addDoc(collection(db, "education_records"), {
                    student_id: userId,
                    student_name: userData.name,
                    student_birth: birth,
                    video_title: data.vid.title,
                    category: data.vid.cat, // DBì—ëŠ” ì¹´í…Œê³ ë¦¬ ì €ì¥
                    date: todayStr,
                    timestamp: Timestamp.now()
                });

                document.getElementById('loadingOverlay').style.display = 'none';
                Swal.fire({
                    icon: 'success',
                    title: 'ìˆ˜ë£Œ ì™„ë£Œ! ğŸ‰',
                    text: `${userData.name}ë‹˜, [${data.vid.title}] êµìœ¡ ìˆ˜ë£Œê°€ í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.`
                });

            } catch(e) {
                console.error(e);
                document.getElementById('loadingOverlay').style.display = 'none';
                Swal.fire('ì˜¤ë¥˜', 'ì²˜ë¦¬ ì¤‘ ë¬¸ì œê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            }
        };
    </script>
</body>
</html>
